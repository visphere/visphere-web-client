<!--
 ~ Copyright (c) 2023 by MoonSphere Systems
 ~ Originally developed by MiÅ‚osz Gilga <https://miloszgilga.pl>
 -->

<msph-modal-wrapper
  [isLoading]="(isLoading$ | async)!"
  (emitOnClose)="handleEmitOnClose()"
  (emitOnAnimationDone)="handleShowHcaptchaWebcomponent()"
  modalType="verify-captcha"
  [header]="'msph.webClient.modal.captchaHeader' | translate"
  [paragraph]="paragraph">
  <ng-container content>
    <div class="relative w-[302px] h-[76px] mx-auto">
      <div class="msph-captcha-modal__skeleton-loader"></div>
      <div class="absolute top-0 left-0" *ngIf="isCaptchaVisible">
        <h-captcha
          *mcRerender="selectedLang"
          [attr.site-key]="captchaSitekey"
          [attr.hl]="selectedLang"
          (verified)="handleOnVerified()"
          (error)="handleOnError($event)" />
      </div>
    </div>
    <div class="flex flex-col items-center">
      <p
        *ngIf="errorMessage"
        class="text-msph-danger-primary dark:msph-danger-secondary text-sm text-center mt-2">
        {{ errorMessage }}
      </p>
    </div>
  </ng-container>
</msph-modal-wrapper>
