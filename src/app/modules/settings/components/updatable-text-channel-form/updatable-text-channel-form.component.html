<!--
 ~ Copyright (c) 2023 by Visphere & Vsph Technologies
 ~ Originally developed by MiÅ‚osz Gilga <https://miloszgilga.pl>
 -->

<form
  *ngIf="textChannelForm"
  [formGroup]="textChannelForm"
  (ngSubmit)="handleSubmitUpdateTextChannel()"
  class="grid gap-y-3">
  <vsph-common-form-input
    [maxLength]="50"
    [additionalInfo]="true"
    formControlIdentifier="name"
    [i18nPrefix]="defaultPrefix">
    <vsph-field-validator />
    <vsph-field-validator type="pattern" />
    <vsph-field-validator type="minlength" />
  </vsph-common-form-input>
  <div class="grid grid-cols-2 gap-x-3">
    <button
      type="button"
      [disabled]="nameFieldIsExact"
      (click)="handleRevertPreviousName()"
      class="vsph-button vsph-button--secondary">
      {{ 'vsph.clientCommon.settingsPage.revertPrevious' | translate }}
    </button>
    <vsph-lazy-button-spinner
      [isLoading]="(activeLoading$ | async) === 'updating'"
      [buttonDisabled]="textChannelForm.invalid || nameFieldIsExact">
      {{ 'vsph.clientCommon.settingsPage.nameSubmitButton' | translate }}
    </vsph-lazy-button-spinner>
  </div>
</form>
