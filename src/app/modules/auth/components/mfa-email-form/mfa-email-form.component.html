<!--
 ~ Copyright (c) 2023 by Visphere & Vsph Technologies
 ~ Originally developed by MiÅ‚osz Gilga <https://miloszgilga.pl>
 -->

<vsph-deferred-button
  (emitOnAction)="handleSendEmailMessage()"
  [isDisabled]="!!(isLoading$ | async)"
  [isLoading]="(isSending$ | async)!"
  [deferTimeSec]="10"
  [enabledOnMount]="false"
  color="dark"
  styles="vsph-button vsph-button--secondary"
  innerI18nText="vsph.clientCommon.mfaEmailPage.sendVerificationToken" />
<form
  [formGroup]="tokenForm"
  (ngSubmit)="handleSubmitTokenForm()"
  class="grid gap-y-3 mt-4">
  <vsph-password-input-toggler
    [maxLength]="50"
    formControlIdentifier="token"
    i18nPrefix="clientCommon.mfaEmailPage">
    <vsph-field-validator />
  </vsph-password-input-toggler>
  <vsph-lazy-button-spinner
    [isLoading]="(isLoading$ | async)!"
    [buttonDisabled]="tokenForm.invalid">
    {{ 'vsph.clientCommon.mfaEmailPage.proceedLogin' | translate }}
  </vsph-lazy-button-spinner>
</form>
