<!--
 ~ Copyright (c) 2023 by MoonSphere Systems
 ~ Originally developed by MiÅ‚osz Gilga <https://miloszgilga.pl>
 -->

<button
  #selectViewHolder
  (focus)="handleShowItemsList()"
  type="button"
  [disabled]="formDisabled"
  class="relative cursor-default w-full">
  <ul
    *ngIf="itemsListIsOpen"
    [@dropboxFadeAndMove]
    class="msph-auth__single-select-spinner-list__container"
    [class.msph-auth__single-select-spinner-list__container--static]="
      inputStyle === 'static'
    "
    [class.msph-auth__single-select-spinner-list__container--viewport]="
      inputStyle === 'viewport'
    ">
    <li *ngFor="let element of filteredList">
      <button
        type="button"
        class="msph-auth__single-select-spinner-list__element hover:bg-msph-primary-tint hover:text-msph-primary-light cursor-pointer"
        (click)="handleSelectItem(element)">
        {{ element.value }}
      </button>
    </li>
    <li
      *ngIf="filteredList.length === 0"
      class="msph-auth__single-select-spinner-list__element text-gray-500">
      {{ 'msph.common.utils.notFound' | translate }}
    </li>
  </ul>
  <input
    #inputElement
    [placeholder]="i18nPlaceholder | translate"
    (input)="handleFilterElements(inputElement.value)"
    type="text"
    [disabled]="formDisabled"
    (focus)="handleShowItemsList()"
    class="msph-auth__input w-full"
    [class.msph-auth__input--static]="inputStyle === 'static'"
    [class.msph-auth__input--viewport]="inputStyle === 'viewport'"
    [class.msph-auth__input--invalid]="hasErrors"
    [class.msph-auth__input--static--invalid]="
      inputStyle === 'static' && hasErrors
    "
    [class.msph-auth__input--viewport--invalid]="
      inputStyle === 'viewport' && hasErrors
    " />
  <div
    class="absolute top-1/2 -translate-y-1/2 right-2.5 text-gray-600 dark:text-gray-300 md:text-gray-300 md:dark:text-gray-600 flex items-center">
    <ng-icon
      name="selectArrowDownIcon"
      [class.msph-auth__text--invalid]="hasErrors"
      [class.msph-auth__text--static--invalid]="
        inputStyle === 'static' && hasErrors
      "
      [class.msph-auth__text--viewport--invalid]="
        inputStyle === 'viewport' && hasErrors
      "
      class="text-sm" />
  </div>
</button>
